{"ast":null,"code":"var _jsxFileName = \"/Users/macbookair/PycharmProjects/TicTacToe/client/src/pages/Game.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Row, Col } from 'antd';\nimport { Center } from \"../hoc/Center\";\nimport { useParams } from \"react-router-dom\";\nimport { socketio } from \"../socket\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]];\n\nconst Game = () => {\n  _s();\n\n  var _currentGame$creator;\n\n  const [currentGame, setCurr] = useState({});\n  const [numHover, setNumHover] = useState(null);\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    socketio.emit('detail_game', id, game => {\n      setCurr(game);\n\n      if (game.creator.name !== localStorage.getItem('username')) {\n        const data = {\n          username: localStorage.getItem('username'),\n          game_id: game.id\n        };\n        socketio.emit('join_to_game', data, d => {\n          console.log(d);\n          setCurr(d);\n        });\n      }\n    });\n    return () => {\n      console.log('if any player left game, then game remove');\n    };\n  }, [id]);\n\n  const hovering = (e, id) => {\n    if (!currentGame.start) return;\n    const target = e.target;\n    const hoveredCell = +target.innerText;\n\n    if (hoveredCell % 2 === 0) {\n      setNumHover({\n        num: id,\n        error: true\n      });\n    } else {\n      setNumHover({\n        num: id,\n        error: false\n      });\n    }\n  };\n\n  const setFigure = e => {\n    console.log(currentGame.creator.figure); // console.log(e.target.innerText)\n  };\n\n  const resetNumHover = () => setNumHover(null);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Center, {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), currentGame === null || currentGame === void 0 ? void 0 : (_currentGame$creator = currentGame.creator) === null || _currentGame$creator === void 0 ? void 0 : _currentGame$creator.name, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 48\n      }, this), !(currentGame !== null && currentGame !== void 0 && currentGame.start) ? \"Гра заблокована\" : \"Можна грати\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), matrix.map(e => /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: e.map(i => /*#__PURE__*/_jsxDEV(Col, {\n            span: 8,\n            onMouseEnter: e => hovering(e, i),\n            onClick: setFigure,\n            onMouseLeave: resetNumHover,\n            className: !currentGame.start ? \"game-disable\" : (numHover === null || numHover === void 0 ? void 0 : numHover.num) === i ? numHover.error ? 'cell-error' : 'cell-hover' : 'cell'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 37\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 29\n        }, this)\n      }, void 0, false))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(Game, \"cAeww43wyrRAivqMD63vKbnzwPs=\", false, function () {\n  return [useParams];\n});\n\n_c = Game;\nexport default Game;\n\nvar _c;\n\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"names":["React","useState","useEffect","Row","Col","Center","useParams","socketio","matrix","Game","currentGame","setCurr","numHover","setNumHover","id","emit","game","creator","name","localStorage","getItem","data","username","game_id","d","console","log","hovering","e","start","target","hoveredCell","innerText","num","error","setFigure","figure","resetNumHover","map","i"],"sources":["/Users/macbookair/PycharmProjects/TicTacToe/client/src/pages/Game.tsx"],"sourcesContent":["import React, { useState, MouseEvent, useEffect, ChangeEvent } from 'react';\n\nimport { Row, Col } from 'antd';\nimport { Center } from \"../hoc/Center\";\nimport {useParams} from \"react-router-dom\";\nimport {socketio} from \"../socket\";\nimport {Game as GameType} from '../types'\n\nconst matrix = [\n    [1, 2, 3],\n    [4, 5, 6],\n    [7, 8, 9]\n]\n\ninterface INum{\n    num: number;\n    error: boolean\n}\n\ninterface JoinToGameValues{\n    username: string,\n    game_id: string\n}\n\nconst Game = () => {\n\n    const [currentGame, setCurr] = useState<GameType>({} as GameType)\n\n    const [numHover, setNumHover] = useState<INum | null>(null)\n\n    const { id } = useParams()\n\n    useEffect(() =>{\n        socketio.emit('detail_game', id, (game: GameType) => {\n            setCurr(game)\n\n            if (game.creator.name !== localStorage.getItem('username')){\n\n                const data: JoinToGameValues = {\n                    username: localStorage.getItem('username')!,\n                    game_id: game.id\n                }\n                socketio.emit('join_to_game', data, (d: any) =>{\n                    console.log(d)\n                    setCurr(d)\n                })\n            }\n        })\n\n        return () =>{\n            console.log('if any player left game, then game remove')\n        }\n\n    }, [id])\n\n    const hovering = (e: MouseEvent<HTMLDivElement>, id: number) => {\n        if (!currentGame.start) return\n\n        const target = e.target as HTMLDivElement\n        const hoveredCell = +target.innerText\n\n        if (hoveredCell % 2 === 0){\n            setNumHover({\n                num: id,\n                error: true\n            })\n        }else{\n            setNumHover({\n                num: id,\n                error: false\n            })\n        }\n    }\n\n    const setFigure = (e: any) =>{\n        console.log(currentGame.creator.figure)\n        // console.log(e.target.innerText)\n    }\n\n    const resetNumHover = () => setNumHover(null)\n\n    return (\n        <>\n            <Center>\n                <br/>\n                <br/>\n                { currentGame?.creator?.name } <br/>\n                { !currentGame?.start ? \"Гра заблокована\": \"Можна грати\" }\n                <br/>\n                <br/>\n                {\n                    matrix.map(e => (\n                        <>\n                            <Row>\n                                {e.map(i =>(\n                                    <Col\n                                        span={8}\n                                        onMouseEnter={(e) => hovering(e, i)}\n                                        onClick={setFigure}\n                                        onMouseLeave={resetNumHover}\n                                        className={\n                                        !currentGame.start\n                                            ? \"game-disable\"\n                                            :\n                                            numHover?.num === i\n                                                ?\n                                                numHover.error\n                                                    ? 'cell-error'\n                                                    :\n                                                'cell-hover'\n                                                :\n                                                'cell'\n                                        }\n                                    ></Col>\n                                ))}\n                            </Row>\n                        </>\n                    ))\n                }\n            </Center>\n        </>\n    );\n}\n\nexport default Game;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}