<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <p>name</p>
    <form>
        <input type="text" class="t">
        <input type="submit" class="but">

        <button>NEW</button>
    </form>

    <ul></ul>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.min.js"></script>
    <script>
        const name = prompt('enter name');
        const n = prompt('num chat');
        document.querySelector('p').textContent = name;
        let b = document.querySelector('.but');

        const sio = io(
            {
                transports: ['websocket'],
                upgrade: false,
                auth: {
                    username: name
                }
            }
        );

        sio.on('connect', () =>{
            console.log('connected')
            sio.emit('join', n)
        })

        b.addEventListener('click', (e) =>{
            e.preventDefault()
            sio.emit('mess', {
                room: n,
                mess: document.querySelector('input').value
            })
        })

        sio.on('get:mess', (data)=>{
            console.log(data)
            let e = document.createElement("li");
            e.textContent = `${data.user} - ${data.mess}`;
            document.querySelector('ul').append(e)
            document.querySelector('input').value = ''
        })

    </script>

</body>
</html>